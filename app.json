{
  "name": "mrbelvedereci",
  "description": "A lightweight CI server for Salesforce developers to automate running CumulusCI flows against Github repositories",
  "repository": "https://github.com/SalesforceFoundation/mrbelvedereci",
  "logo": "https://avatars.githubusercontent.com/u/5545431?v=3&s=100",
  "keywords": ["ci", "python", "django", "salesforce", "github"],
  "env": {
    "SITE_URL": {
      "description": "The base url to the site.  Typically this should be https://<your_app>.herokuapp.com",
      "value": ""
    },
    "FROM_EMAIL": {
      "description": "The email address outbound mail should be sent from",
      "value": ""
    },
    "CONNECTED_APP_CLIENT_ID": {
      "description": "The Client ID of the Salesforce Connected App.  You should be able to get these values from the command `cumulusci2 org connected_app` in your locally configured instance of CumulusCI",
      "value": ""
    },
    "CONNECTED_APP_CLIENT_SECRET": { "description": "The Client Secret of the Salesforce Connected App. You should be able to get these values from the command `cumulusci2 org connected_app` in your locally configured instance of CumulusCI",
      "value": ""
    },
    "CONNECTED_APP_CALLBACK_URL": {
      "description": "The callback url configured for the Connected App.  You should be able to get these values from the command `cumulusci2 org connected_app` in your locally configured instance of CumulusCI",
      "value": ""
    },
    "GITHUB_USERNAME": {
      "description": "The Github username used to connect to repositories and create web hooks",
      "value": ""
    },
    "GITHUB_PASSWORD": {
      "description": "The Github password used to connect to repositories and create web hooks.  Using an application token instead of password is recommended",
      "value": ""
    },
    "GITHUB_WEBHOOK_BASE_URL": {
      "description": "The url for handling Github webhooks.  Ex: https://<app-name>.herokuapp.com/webhook/github",
      "value": ""
    },
    "GITHUB_WEBHOOK_SECRET": {
      "description": "The url for handling Github webhooks.  Ex: https://<app-name>.herokuapp.com/webhook/github",
      "generator": "secret"
    },
    "DJANGO_ADMIN_URL": {
      "description": "The url path to the admin section of the site",
      "value": "admin"
    },
    "DJANGO_SECRET_KEY": {
      "description": "The url path to the admin section of the site",
      "generator": "secret"
    },
    "DJANGO_SETTINGS_MODULE": {
      "description": "The site settings to use",
      "generator": "config.settings.production"
    },
    "SFDX_PRIVATE_KEY": {
      "description": "The private key for the JWT authentication to the devhub for Salesforce DX.  Required to use scratch orgs",
      "value": "",
      "required": false
    },
    "SFDX_CLIENT_ID": {
      "description": "The ClientID of the JWT connected app used for authenticating to the devhub for Salesforce DX.  Required to use scratch orgs",
      "value": "",
      "required": false
    },
    "SFDX_HUB_USERNAME": {
      "description": "The username for the devhub org for Salesforce DX.  Required to use scratch orgs",
      "value": "",
      "required": false
    }
  },
  "formation": {
    "web": {
      "quantity": 1,
      "size": "Standard-1X"
    },
    "worker": {
      "quantity": 1,
      "size": "Standard-1X"
    },
    "worker_short": {
      "quantity": 1,
      "size": "Standard-1X"
    }
  },
  "scripts": {
    "postdeploy": "python manage.py migrate --noinput"
  },
  "image": "heroku/python",
  "addons": [
    "heroku-redis:premium-2",
    "sendgrid:starter"
  ],
  "buildpacks": [
     {"url": "heroku/python"},
     {"url": "heroku/ruby"},
     {"url": "https://github.com/SalesforceFoundation/simple-salesforce-dx-buildpack.git"}
  ],
  "environments": {
    "test": {
      "scripts": {
        "test-setup": "pip install --upgrade -r requirements/test.txt",
        "test": "./heroku_ci.sh"
      },
      "env": {
        "DJANGO_SETTINGS_MODULE": "config.settings.test",
        "DATABASE_URL": "sqlite:///test.db"
      }
    }
  }
}
